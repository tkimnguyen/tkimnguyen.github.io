<!DOCTYPE html><html xmlns="http://www.w3.org/1999/xhtml"><head><title>LDAP for Plone with pas.plugins.ldap</title><meta name="generator" content="Hovercraft! 1.0 http://regebro.github.com/hovercraft"></meta><link rel="stylesheet" href="css/hovercraft.css" media="all"></link><link rel="stylesheet" href="css/impressConsole.css" media="all"></link><link rel="stylesheet" href="css/highlight.css" media="all"></link><link rel="stylesheet" href="presentation.css" media="screen,projection"></link></head><body class="impress-not-supported"><div id="impress" data-transition-duration="800" auto-console="True"><div class="step step-level-1" step="0" data-scale="2" data-x="-700" data-y="-300" data-rotate-x="0" data-rotate-y="0" data-rotate-z="0" data-z="0"><h1 id="ldap-for-plone-with-pas-plugins-ldap">LDAP for Plone with pas.plugins.ldap</h1><p>Jens W. Klein &lt;<a href="mailto:jk@kleinundpartner.at">jk@kleinundpartner.at</a>&gt;</p><p>Klein &amp; Partner KG <a href="http://kleinundpartner.at">http://kleinundpartner.at</a></p><p>Innsbruck, Austria, Europe, Earth</p></div><div class="step step-level-1" step="1" data-scale="1" data-x="350" data-y="600" data-rotate-x="0" data-rotate-y="0" data-rotate-z="90" data-z="0"><h1 id="what-is-ldap">What is LDAP?</h1><p><strong>Lightweight Directory Access Protocol</strong></p></div><div class="step step-level-1" step="2" data-x="200" data-y="600" data-rotate-x="0" data-rotate-y="0" data-rotate-z="90" data-scale="1" data-z="0"><h1 id="ldap-is-a-protocol">LDAP is a Protocol</h1></div><div class="step step-level-1" step="3" data-x="50" data-rotate-x="0" data-rotate-y="0" data-rotate-z="90" data-scale="1" data-y="600" data-z="0"><h1 id="to-query-data-in-the-database">to query data in the database</h1><p>(directory data)</p></div><div class="step step-level-1" step="4" data-x="-100" data-rotate-x="0" data-rotate-y="0" data-rotate-z="90" data-scale="1" data-y="600" data-z="0"><h1 id="but-is-not-a-database-itself">but is <strong>NOT</strong> a database itself</h1></div><div class="step step-level-1" step="5" data-x="0" data-y="1200" data-rotate-x="0" data-rotate-y="0" data-rotate-z="0" data-scale="1" data-z="0"><h1 id="history">History</h1><ul><li>based on IT directory requirements of telecommunication companies' in the early 80ies</li><li>resulted in X.500 specification which included DAP (Directory Access Protocol).</li><li>X.500/DAP is a massive/ complex protocol.</li><li>DAP was not TCP/IP compliant,</li></ul></div><div class="step step-level-1" step="6" data-y="1400" data-rotate-x="0" data-rotate-y="0" data-rotate-z="0" data-scale="1" data-x="0" data-z="0"><p><strong>easier to use lightweight variant was developed around 1993</strong></p></div><div class="step step-level-1" step="7" data-x="350" data-y="2000" data-rotate-x="0" data-rotate-y="0" data-rotate-z="90" data-scale="1" data-z="0"><h1 id="ldap-in-the-wild">LDAP in the Wild</h1></div><div class="step step-level-1" step="8" data-x="250" data-rotate-x="0" data-rotate-y="0" data-rotate-z="90" data-scale="1" data-y="2000" data-z="0"><ul><li><strong>Broadly used</strong> in enterprises and organisations</li><li>with need of <strong>user management</strong></li><li>at <strong>large scale</strong>.</li></ul></div><div class="step step-level-1" step="9" data-x="50" data-rotate-x="0" data-rotate-y="0" data-rotate-z="90" data-scale="1" data-y="2000" data-z="0"><ul><li><strong>mature free software</strong> solutions like<ul><li>OpenLDAP</li><li>389 Directory Server</li><li>Apache Directory Server</li></ul></li></ul></div><div class="step step-level-1" step="10" data-x="-175" data-rotate-x="0" data-rotate-y="0" data-rotate-z="90" data-scale="1" data-y="2000" data-z="0"><ul><li><strong>commercial</strong> solutions like<ul><li><strong>ActiveDirectory</strong> (Microsoft)</li><li><strong>OpenDirectory</strong> (Apple)</li><li><strong>eDirectory</strong> (Novell)</li><li><strong>Tivoli</strong> (IBM)</li><li><strong>Oracle Internet Directory</strong></li></ul></li></ul></div><div class="step step-level-1" step="11" data-x="-375" data-rotate-x="0" data-rotate-y="0" data-rotate-z="90" data-scale="1" data-y="2000" data-z="0"><ul><li>Documented</li><li>Industry standard base schemas available</li><li>Extensible by own schemas.</li></ul></div><div class="step step-level-1" step="12" data-x="0" data-y="2400" data-rotate-x="0" data-rotate-y="0" data-rotate-z="0" data-scale="1" data-z="0"><p><strong>a history lesson about LDAP in ZOPE and Plone</strong></p><p>or what we had <strong>before</strong> pas.plugins.ldap</p><p>or the <strong>reason</strong> we rewrote the LDAP stack</p></div><div class="step step-level-1" step="13" data-x="350" data-y="3000" data-rotate-x="0" data-rotate-y="0" data-rotate-z="90" data-scale="1" data-z="0"><h1 id="products-ldapuserfolder">Products.LDAPUserFolder</h1><ul><li>replaces the original Zope UserFolder</li><li>old school mature code (dates back to 2001)</li><li>difficult to extend (monkey patches needed)</li><li>very limited group management</li></ul></div><div class="step step-level-1" step="14" data-x="125" data-rotate-x="0" data-rotate-y="0" data-rotate-z="90" data-scale="1" data-y="3000" data-z="0"><h1 id="products-ldapmultiplugins">Products.LDAPMultiPlugins</h1><ul><li>plugin for Products.PluggableAuthService (PAS)</li><li>instance of Products.LDAPUserFolder is contained in plugin</li><li>wraps UserFolder API to PAS API</li><li>difficult to install</li></ul></div><div class="step step-level-1" step="15" data-x="-100" data-rotate-x="0" data-rotate-y="0" data-rotate-z="90" data-scale="1" data-y="3000" data-z="0"><h1 id="products-ploneldap">Products.PloneLDAP</h1><ul><li>set of plugins for Products.PluggableAuthService (PAS)</li><li>derives from Products.LDAPMultiPlugins</li><li>integrates LDAP fully into a Plone site</li><li>better group management</li><li>difficult to install</li></ul></div><div class="step step-level-1" step="16" data-x="-325" data-rotate-x="0" data-rotate-y="0" data-rotate-z="90" data-scale="1" data-y="3000" data-z="0"><h1 id="plone-app-ldap">plone.app.ldap</h1><ul><li>UI to install and manage PloneLDAP and the stack below</li><li>easier to install</li></ul></div><div class="step step-level-1" step="17" data-x="0" data-y="3420" data-rotate-x="0" data-rotate-y="0" data-rotate-z="0" data-scale="1" data-z="0"><p>so the existing code</p><ul><li>worked and was mature for the use case it was build for,</li><li>was all but flexible,</li><li>was difficult to understand.</li><li>It was nearly impossible to extend in a sane way (monkey patching!)</li><li>It was stacked all on top of the other.</li></ul></div><div class="step step-level-1" step="18" data-x="-1100" data-y="3400" data-rotate-x="0" data-rotate-y="0" data-rotate-z="180" data-scale="1" data-z="0"><h1 id="now-pas-plugins-ldap">Now: pas.plugins.ldap</h1><p><strong>no code of the old stack was harmed</strong></p><p><strong>we did a complete rewrite</strong></p><p>developed on prior experience with</p><ul><li>Products.GroupsFromLDAP</li><li>bda.ldap</li></ul><p>both discontinued (Plone 2.5 times!)</p></div><div class="step step-level-1" step="19" data-y="3100" data-rotate-x="0" data-rotate-y="0" data-rotate-z="180" data-scale="1" data-x="-1100" data-z="0"><h1 id="features">Features</h1><ul><li><strong>Users and/or Groups</strong> from LDAP</li><li><strong>abstraction</strong> from LDAP structure</li></ul></div><div class="step step-level-1" step="20" data-y="2950" data-rotate-x="0" data-rotate-y="0" data-rotate-z="180" data-scale="1" data-x="-1100" data-z="0"><ul><li><strong>different group models</strong><ul><li>posix</li><li>samba</li><li>groupOfNames</li><li>memberOf</li></ul></li></ul></div><div class="step step-level-1" step="21" data-y="2800" data-rotate-x="0" data-rotate-y="0" data-rotate-z="180" data-scale="1" data-x="-1100" data-z="0"><ul><li><strong>mapping</strong> of LDAP attributes to PAS property sheets.</li><li>account <strong>expiration</strong></li><li>ldap <strong>caching</strong></li><li>support for <strong>many</strong> users</li><li><strong>tested</strong></li></ul></div><div class="step step-level-1" step="22" data-y="2600" data-rotate-x="0" data-rotate-y="0" data-rotate-z="180" data-scale="1" data-x="-1100" data-z="0"><h1 id="limitations">Limitations</h1><ul><li>not support for <strong>multiple</strong> (fallback) LDAP servers -&gt; future</li><li>brings a Plone <strong>Portrait patch</strong>, may conflict with other PAS plugins</li></ul></div><div class="step step-level-1" step="23" data-y="2400" data-rotate-x="0" data-rotate-y="0" data-rotate-z="180" data-scale="1" data-x="-1100" data-z="0"><h1 id="node-ext-ldap">node.ext.ldap</h1><ul><li><strong>LDAP convinience</strong> library</li><li>based on python-ldap</li><li>pure Python</li></ul></div><div class="step step-level-1" step="24" data-y="2250" data-rotate-x="0" data-rotate-y="0" data-rotate-z="180" data-scale="1" data-x="-1100" data-z="0"><ul><li>idea of tree representation (nodes)</li><li>no Plone dependencies</li><li>uses zope.interface/ zope.component</li><li>configuration must be provided by code using it</li></ul></div><div class="step step-level-1" step="25" data-y="2150" data-rotate-x="0" data-rotate-y="0" data-rotate-z="180" data-scale="1" data-x="-1100" data-z="0"><ul><li>98% test coverage</li><li>provides own test layer (against running OpenLDAP)</li></ul></div><div class="step step-level-1" step="26" data-y="2040" data-rotate-x="0" data-rotate-y="0" data-rotate-z="180" data-scale="1" data-x="-1100" data-z="0"><ul><li>used by BlueDynamics Alliance and others in Pyramid projects</li><li>cone.ugm is a<ul><li>Pyramid based</li><li>multitenant</li><li>standalone</li><li>user and group management tool.</li></ul></li></ul></div><div class="step step-level-1" step="27" data-y="1920" data-rotate-x="0" data-rotate-y="0" data-rotate-z="180" data-scale="1" data-x="-1100" data-z="0"><ul><li>dates back to 2007</li><li>8 contributors</li><li>BSD 3-clause licence</li></ul></div><div class="step step-level-1" step="28" data-y="1770" data-rotate-x="0" data-rotate-y="0" data-rotate-z="180" data-scale="1" data-x="-1100" data-z="0"><h1 id="node-ext-ugm">node.ext.ugm</h1><ul><li><strong>user and group management</strong> convinience library and interfaces</li><li>provides also role management (not used in Plone)</li><li>node.ext.ldap provides an UGM object</li><li>no Plone dependencies</li></ul></div><div class="step step-level-1" step="29" data-y="1570" data-rotate-x="0" data-rotate-y="0" data-rotate-z="180" data-scale="1" data-x="-1100" data-z="0"><h1 id="pas-plugins-ldap">pas.plugins.ldap</h1><ul><li>pure PAS plugin</li><li>uses node.ext.ldap's UGM features</li><li>configures node.ext.ldap (GenericSetup)</li><li>provides ZMI and control panel forms to configure LDAP</li></ul></div><div class="step step-level-1" step="30" data-y="1430" data-rotate-x="0" data-rotate-y="0" data-rotate-z="180" data-scale="1" data-x="-1100" data-z="0"><ul><li>works with many users and groups (several 10000)</li><li>support different kinds of groups</li></ul></div><div class="step step-level-1" step="31" data-y="1320" data-rotate-x="0" data-rotate-y="0" data-rotate-z="180" data-scale="1" data-x="-1100" data-z="0"><ul><li>works with different LDAP servers, tested so far<ul><li>OpenLDAP</li><li>OpenDirectory</li><li>ActiveDirectory</li><li>389 Directory Server</li></ul></li></ul></div><div class="step step-level-1" step="32" data-y="1220" data-rotate-x="0" data-rotate-y="0" data-rotate-z="180" data-scale="1" data-x="-1100" data-z="0"><ul><li>10 contributors</li><li>dates back to 2007</li></ul></div><div class="step step-level-1" step="33" data-y="1020" data-rotate-x="0" data-rotate-y="0" data-rotate-z="180" data-scale="1" data-x="-1100" data-z="0"><h1 id="fundraising-campaign">Fundraising Campaign</h1><p>In March 2016 pas.plugins.ldap did not support "many" users well.</p><p>Goal: Refactor parts of the new stack to support LDAP paging.</p><p>There was the need to have a modern scalable LDAP stack in Plone.</p></div><div class="step step-level-1" step="34" data-y="770" data-rotate-x="0" data-rotate-y="0" data-rotate-z="180" data-scale="1" data-x="-1100" data-z="0"><p>The following companies funded together 2000 Dollar.</p><ul><li><strong>Zopyx</strong></li><li><strong>Six Feet Up</strong></li><li><strong>Syslab</strong></li><li><strong>PretaGov</strong></li><li><strong>Enfold Systems</strong></li><li><strong>Wildcard Corp</strong></li></ul></div><div class="step step-level-1" step="35" data-y="520" data-rotate-x="0" data-rotate-y="0" data-rotate-z="180" data-scale="1" data-x="-1100" data-z="0"><p><strong>BlueDynamics Alliance</strong> members Robert Niederreiter and Jens Klein refactored node.ext.ldap and pas.plugins.ldap.</p><p>In August the new release of pas.plugins.ldap was out.</p><p>Now Plone support several <strong>10- or even 100-thousands</strong> of LDAP users and groups.</p></div><div class="step step-level-1" step="36" data-y="270" data-rotate-x="0" data-rotate-y="0" data-rotate-z="180" data-scale="1" data-x="-1100" data-z="0"><h1 id="pas-plugins-ldap-is-supported">pas.plugins.ldap is supported</h1><ul><li>100% <strong>OpenSource</strong>!</li><li>read code, get into it, file issues,</li><li>help to <strong>make it better</strong>!</li><li>BlueDynamics Alliance provides <strong>professional support</strong> for those who need it!</li></ul></div><div class="step step-level-1" step="37" data-scale="4" data-x="-500" data-y="2000" data-rotate-x="0" data-rotate-y="0" data-rotate-z="90" data-z="0"></div></div><div id="hovercraft-help"><table><tr><th>Space</th><td>Forward</td></tr><tr><th>Right, Down, Page Down</th><td>Next slide</td></tr><tr><th>Left, Up, Page Up</th><td>Previous slide</td></tr><tr><th>P</th><td>Open presenter console</td></tr><tr><th>H</th><td>Toggle this help</td></tr></table></div><script type="text/javascript" src="js/impress.js"></script><script type="text/javascript" src="js/impressConsole.js"></script><script type="text/javascript" src="js/hovercraft.js"></script></body></html>